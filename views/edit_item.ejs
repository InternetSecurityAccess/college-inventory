<%- layout('layout') %>

<h2>Редактировать предмет: <%= item.name %></h2>

<form action="/edit/<%= item.id %>" method="POST">
    <div>
        <label for="name">Название:</label>
        <input type="text" id="name" name="name" value="<%= item.name %>" required>
    </div>
    <div>
        <label for="description">Описание:</label>
        <textarea id="description" name="description"><%= item.description %></textarea>
    </div>
    <div>
        <label for="quantity">Количество:</label>
        <input type="number" id="quantity" name="quantity" value="<%= item.quantity %>" min="1">
    </div>
    <div>
        <label for="inventory_number">Инвентарный номер:</label>
        <input type="text" id="inventory_number" name="inventory_number" value="<%= item.inventory_number %>">
    </div>
    <div>
        <label for="serial_number">Серийный номер:</label>
        <input type="text" id="serial_number" name="serial_number" value="<%= item.serial_number %>">
    </div>
    <div>
        <label for="location_id">Местоположение:</label>
        <input type="text" id="locationSearch" placeholder="Поиск местоположения...">
        <select id="location_id" name="location_id">
            <option value="">-- Выберите местоположение --</option>
            <% locations.forEach(loc => { %>
                <option value="<%= loc.id %>" <%= item.location_id === loc.id ? 'selected' : '' %>><%= loc.name %></option>
            <% }) %>
        </select>
    </div>
    <div>
        <label for="item_type_id">Вид предмета:</label>
        <input type="text" id="itemTypeSearch" placeholder="Поиск вида предмета...">
        <select id="item_type_id" name="item_type_id">
            <option value="">-- Выберите вид предмета --</option>
            <% itemTypes.forEach(type => { %>
                <option value="<%= type.id %>" <%= item.item_type_id === type.id ? 'selected' : '' %>><%= type.name %></option>
            <% }) %>
        </select>
    </div>
    <div>
        <label for="acquisition_date">Дата приобретения:</label>
        <input type="date" id="acquisition_date" name="acquisition_date" value="<%= item.acquisition_date ? item.acquisition_date.split('T')[0] : '' %>">
    </div>
    <div>
        <label for="responsible_employee">Ответственный:</label>
        <input type="text" id="responsible_employee" name="responsible_employee" value="<%= item.responsible_employee %>">
    </div>
    <div>
        <label for="status">Статус:</label>
        <select id="status" name="status">
            <option value="В наличии" <%= item.status === 'В наличии' ? 'selected' : '' %>>В наличии</option>
            <option value="В ремонте" <%= item.status === 'В ремонте' ? 'selected' : '' %>>В ремонте</option>
            <option value="Списан" <%= item.status === 'Списан' ? 'selected' : '' %>>Списан</option>
            <option value="На выдаче" <%= item.status === 'На выдаче' ? 'selected' : '' %>>На выдаче</option>
        </select>
    </div>
    <button type="submit">Сохранить изменения</button>
</form>

<br>
<a href="/item/<%= item.id %>">Отмена (на страницу деталей)</a>
<br>
<a href="/">К списку предметов</a>

<script src="/js/edit_item.js"></script>